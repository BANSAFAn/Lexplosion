<UserControl
    x:Class="Lexplosion.Common.Views.Pages.FactoryMenu.FactoryGeneralView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Lexplosion.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:enum="clr-namespace:Lexplosion;assembly=Lexplosion.Core"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:objects="clr-namespace:Lexplosion;assembly=Lexplosion.Core"
    mc:Ignorable="d">

    <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="36" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Header  -->
            <Border
                Height="36"
                BorderBrush="#202020"
                BorderThickness="0,0,0,1">
                <Grid>
                    <TextBlock
                        FontSize="18"
                        FontWeight="Medium"
                        Foreground="White"
                        Opacity="0.9"
                        Text="{DynamicResource instanceProperties}" />

                    <Button
                        Margin="0,3,0,0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Command="{Binding CloseModalWindowCommand}"
                        IsCancel="True"
                        Style="{StaticResource IconicButton}">
                        <Viewbox
                            Width="20"
                            Height="20"
                            Opacity="0.9"
                            Stretch="Fill">
                            <Path
                                Width="20"
                                Height="20"
                                Data="m6.021 15.854-1.854-1.875L8.125 10 4.167 6.021l1.854-1.896L10 8.104l3.979-3.979 1.854 1.896L11.875 10l3.958 3.979-1.854 1.875L10 11.875Z"
                                Fill="White" />
                        </Viewbox>
                        <Button.ToolTip>
                            <ToolTip
                                Background="Black"
                                BorderThickness="0"
                                FontFamily="pack://application:,,,/assets/fonts/#Casper Bold"
                                HorizontalOffset="15"
                                Placement="Relative"
                                VerticalOffset="-20">
                                <TextBlock
                                    MaxWidth="400"
                                    Foreground="White"
                                    Text="{DynamicResource close}"
                                    TextWrapping="WrapWithOverflow" />
                            </ToolTip>
                        </Button.ToolTip>
                    </Button>
                </Grid>
            </Border>

            <StackPanel Grid.Row="1">
                <Border
                    Margin="0,10,0,10"
                    Padding="5,0,5,10"
                    BorderBrush="#202020"
                    BorderThickness="0,0,0,1">
                    <Grid>
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="14"
                            FontWeight="Medium"
                            Foreground="White"
                            Opacity="0.8"
                            Text="{DynamicResource instanceName}" />

                        <!--<TextBox
                            Grid.Column="1"
                            Width="200"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            FontSize="14"
                            FontWeight="Medium"
                            Opacity="0.8"
                            Style="{StaticResource DarkTextBox}"
                            Text="{Binding Model.Name, UpdateSourceTrigger=PropertyChanged}" />-->

                        <controls:PlaceholderTextBox
                            Grid.Column="1"
                            Width="200"
                            HorizontalAlignment="Right"
                            VerticalContentAlignment="Center"
                            FontSize="14"
                            FontWeight="Medium"
                            Opacity="0.8"
                            Placeholder="{Binding Model.Placeholder, UpdateSourceTrigger=PropertyChanged}"
                            Style="{StaticResource DarkPlaceholderTextBox}"
                            Text="{Binding Model.Name, UpdateSourceTrigger=PropertyChanged}" />
                    </Grid>
                </Border>

                <Border
                    Margin="0,0,0,10"
                    Padding="5,0,5,10"
                    BorderBrush="#202020"
                    BorderThickness="0,0,0,1">
                    <StackPanel>
                        <Grid Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="14"
                                    FontWeight="Medium"
                                    Foreground="White"
                                    Opacity="0.8"
                                    Text="{DynamicResource minecraftVersion}" />

                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="12"
                                    FontWeight="Medium"
                                    Foreground="White"
                                    Opacity="0.6"
                                    Text="{DynamicResource showSnapshot}" />
                            </StackPanel>

                            <ToggleButton
                                HorizontalAlignment="Right"
                                IsChecked="{Binding Model.IsShowSnapshots}"
                                Style="{StaticResource ToggleSwitch}" />
                        </Grid>
                        <Grid>
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="Medium"
                                Foreground="White"
                                Opacity="0.8"
                                Text="{DynamicResource gameVersion}" />

                            <ComboBox
                                Grid.Column="1"
                                Width="200"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"
                                FontSize="14"
                                FontWeight="Medium"
                                ItemsSource="{Binding Model.GameVersions}"
                                Opacity="0.8"
                                SelectedValue="{Binding Model.Version, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource LighterDefaultComboBox}" />
                        </Grid>
                    </StackPanel>
                </Border>

                <Border
                    Margin="0,0,0,0"
                    Padding="5,0,5,10"
                    BorderBrush="#202020"
                    BorderThickness="0,0,0,1">
                    <StackPanel>
                        <Grid Margin="0,0,0,10">
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="Medium"
                                Foreground="White"
                                Opacity="0.8"
                                Text="{DynamicResource gameType}" />

                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <RadioButton
                                    Command="{Binding SwitchClientType}"
                                    CommandParameter="{x:Static objects:ClientType.Vanilla}"
                                    Content="Vanilla"
                                    GroupName="ClientType"
                                    IsChecked="{Binding IsVanilla}"
                                    Style="{StaticResource HighlightRadioButton}" />
                                <RadioButton
                                    Margin="3,0,0,0"
                                    Command="{Binding SwitchClientType}"
                                    CommandParameter="{x:Static objects:ClientType.Forge}"
                                    Content="Forge"
                                    GroupName="ClientType"
                                    IsChecked="{Binding IsForge}"
                                    IsEnabled="{Binding Model.ModloaderModel.IsForgeAvaliable, Mode=OneWay}"
                                    Style="{StaticResource HighlightRadioButton}" />
                                <RadioButton
                                    Margin="3,0,0,0"
                                    Command="{Binding SwitchClientType}"
                                    CommandParameter="{x:Static objects:ClientType.Fabric}"
                                    Content="Fabric"
                                    GroupName="ClientType"
                                    IsChecked="{Binding IsFabric}"
                                    IsEnabled="{Binding Model.ModloaderModel.IsFabricAvalialbe, Mode=OneWay}"
                                    Style="{StaticResource HighlightRadioButton}" />
                                <RadioButton
                                    Margin="3,0,0,0"
                                    Command="{Binding SwitchClientType}"
                                    CommandParameter="{x:Static objects:ClientType.Quilt}"
                                    Content="Quilt"
                                    GroupName="ClientType"
                                    IsChecked="{Binding IsQuilt}"
                                    IsEnabled="{Binding Model.ModloaderModel.IsQuiltAvaliable}"
                                    Style="{StaticResource HighlightRadioButton}" />
                            </StackPanel>
                        </Grid>

                        <Grid Margin="0,10,0,20">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Model.GameType}" Value="{x:Static enum:GameType.Modded}" />
                                                <Condition Binding="{Binding Model.ModloaderModel.IsAvaliable}" Value="True" />
                                            </MultiDataTrigger.Conditions>
                                            <MultiDataTrigger.Setters>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger.Setters>
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="Medium"
                                Foreground="White"
                                Opacity="0.8"
                                Text="{DynamicResource modloaderVersion}" />

                            <ComboBox
                                Grid.Column="1"
                                Width="200"
                                HorizontalAlignment="Right"
                                FontSize="14"
                                FontWeight="Medium"
                                ItemsSource="{Binding Model.ModloaderModel.Versions}"
                                Opacity="0.8"
                                SelectedValue="{Binding Model.ModloaderModel.Version, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource LighterDefaultComboBox}" />
                        </Grid>

                        <StackPanel>
                            <StackPanel.Style>
                                <Style TargetType="{x:Type StackPanel}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Model.GameType}" Value="{x:Static enum:GameType.Vanilla}" />
                                                <Condition Binding="{Binding Model.OptifineModel.IsAvaliable}" Value="True" />
                                            </MultiDataTrigger.Conditions>
                                            <MultiDataTrigger.Setters>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger.Setters>
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>
                            <Grid Margin="0,0,0,20">
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="14"
                                    FontWeight="Medium"
                                    Foreground="White"
                                    Opacity="0.8"
                                    Text="Optifine" />

                                <ToggleButton
                                    HorizontalAlignment="Right"
                                    IsChecked="{Binding Model.OptifineModel.IsEnable}"
                                    Style="{StaticResource ToggleSwitch}" />
                            </Grid>
                            <ComboBox
                                ItemsSource="{Binding Model.OptifineModel.Versions}"
                                SelectedItem="{Binding Model.OptifineModel.Version}"
                                Visibility="{Binding Model.OptifineModel.IsEnable, Converter={StaticResource ConvertBoolToVisibility}}" />
                        </StackPanel>

                        <Grid>
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding DataContext.IsFabric, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Value="True">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding DataContext.IsQuilt, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Value="True">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="Medium"
                                Foreground="White"
                                Opacity="0.8"
                                Text="Sodium" />

                            <ToggleButton
                                HorizontalAlignment="Right"
                                IsChecked="{Binding Model.IsSodium}"
                                Style="{StaticResource ToggleSwitch}" />
                        </Grid>
                    </StackPanel>
                </Border>

                <Border
                    Margin="0,0,0,10"
                    Padding="5,0,5,10"
                    BorderBrush="#202020"
                    BorderThickness="0,0,0,1"
                    Visibility="Collapsed" />
            </StackPanel>
            <Button
                Grid.Row="1"
                Width="410"
                Height="30"
                Margin="0,80,0,0"
                VerticalAlignment="Bottom"
                Background="{DynamicResource SecondarySolidColorBrush}"
                Command="{Binding ActionCommand}"
                Content="{DynamicResource createInstance}"
                FontWeight="Medium"
                IsDefault="True"
                IsEnabled="{Binding IsExportFinished}"
                Style="{StaticResource DefaultBrandColorButton}" />
        </Grid>
    </Grid>
</UserControl>