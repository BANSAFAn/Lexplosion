<UserControl
    x:Class="Lexplosion.WPF.NewInterface.Mvvm.Views.Pages.MainContent.ServerProfile.ServerProfileLeftPanelView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Lexplosion.WPF.NewInterface.Controls"
    xmlns:converters="clr-namespace:Lexplosion.WPF.NewInterface.Core.Converters"
    xmlns:core="clr-namespace:Lexplosion.WPF.NewInterface.Core"
    xmlns:coreObjects="clr-namepsace:Lexplosion.Logic.Objects;assembly=Lexplosion.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:extensions="clr-namespace:Lexplosion.WPF.NewInterface.Extensions"
    xmlns:local="clr-namespace:Lexplosion.WPF.NewInterface.Mvvm.Views.Pages.MainContent.ServerProfile"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:objects="clr-namespace:Lexplosion.WPF.NewInterface.Core.Objects"
    xmlns:objectsCore="clr-namespace:Lexplosion.Logic.Objects;assembly=Lexplosion.Core"
    xmlns:serverprofile="clr-namespace:Lexplosion.WPF.NewInterface.Mvvm.ViewModels.MainContent.ServerProfile"
    d:DataContext="{d:DesignInstance Type=serverprofile:ServerProfileLeftPanelViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <UserControl.Resources>
        <DataTemplate DataType="{x:Type objects:LeftPanelMenuItem}">
            <Border>
                <controls:DefaultMainMenuTabItem
                    GroupName="LeftPanelInstanceProfileItem"
                    IconHeight="{Binding IconHeight}"
                    IconKey="{Binding Icon}"
                    IconWidth="{Binding IconWidth}"
                    IsChecked="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}"
                    TextKey="{Binding TextKey}" />
                <Border.Style>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="BorderBrush" Value="Transparent" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Style.Triggers>
                            <!--  nth-child with alternative index  -->
                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="1">
                                <Setter Property="Padding" Value="0,0,0,8" />
                                <Setter Property="Margin" Value="0,0,0,8" />
                                <Setter Property="BorderBrush" Value="{DynamicResource LeftPanelItemsSeparateSolidColorBrush}" />
                                <Setter Property="BorderThickness" Value="0,0,0,1" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
            </Border>
        </DataTemplate>

        <DataTemplate DataType="{x:Type core:LeftPanelFieldInfo}">
            <TextBlock
                FontSize="13"
                FontWeight="Medium"
                Foreground="{DynamicResource PrimaryForegroundSolidColorBrush}"
                TextWrapping="WrapWithOverflow">
                <!--  TODO: Language Key Here  -->
                <Run extensions:TextBlockExtensions.RunByKey="{Binding Name, Mode=OneWay}" />
                <Run Foreground="{DynamicResource ActivitySolidColorBrush}" Text="{Binding Value, Mode=OneWay}" />
            </TextBlock>
        </DataTemplate>

        <DataTemplate DataType="{x:Type objectsCore:Link}">
            <Border
                x:Name="Border"
                Width="34"
                Height="34"
                Margin="4,0,0,0"
                Padding="6"
                Background="{DynamicResource SecondarySolidColorBrush}"
                BorderBrush="{DynamicResource SeparateSolidColorBrush}"
                BorderThickness="1"
                CornerRadius="5"
                Cursor="Hand"
                MouseDown="Border_MouseDown">
                <Border>
                    <Viewbox>
                        <Path
                            x:Name="Path"
                            extensions:PathExtensions.StringKeyData="{Binding Name}"
                            Fill="{DynamicResource SecondaryForegroundSolidColorBrush}"
                            Stretch="Fill" />
                    </Viewbox>
                </Border>
            </Border>

            <DataTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Path" Property="Fill" Value="{DynamicResource ActivitySolidColorBrush}" />
                    <Setter TargetName="Border" Property="Background" Value="{DynamicResource PrimarySolidColorBrush}" />
                </Trigger>
            </DataTemplate.Triggers>

        </DataTemplate>
    </UserControl.Resources>

    <Grid>
        <Border
            Background="{DynamicResource LeftPanelSolidColorBrush}"
            BorderBrush="{DynamicResource LeftPanelOutsideBorderSolidColorBrush}"
            BorderThickness="0,0,2,0">
            <Grid>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Back Button  -->
                <Grid Margin="16,48,16,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Button
                        Command="{Binding BackCommand}"
                        Content="{DynamicResource Back}"
                        IsCancel="True"
                        Style="{DynamicResource GhostButton}" />
                </Grid>

                <!--  Header  -->
                <Grid
                    x:Name="Header"
                    Grid.Row="1"
                    Margin="16,16,0,0"
                    HorizontalAlignment="Stretch">
                    <Grid ShowGridLines="False">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Avatar  -->
                        <Border
                            Padding="12,0,0,0"
                            BorderBrush="{DynamicResource ActivitySolidColorBrush}"
                            BorderThickness="4,0,0,0"
                            CornerRadius="2,0,0,2">

                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Border
                                        Width="54"
                                        Height="54"
                                        Background="{Binding ServerModel.IconUrl, Mode=OneWay, Converter={converters:ImageSourceNullValidateConverter}}"
                                        CornerRadius="5" />

                                    <ItemsControl Margin="8,0,0,0" ItemsSource="{Binding AdditionalInfo}" />
                                </StackPanel>

                                <Grid
                                    Grid.Row="2"
                                    Margin="0,8,32,8"
                                    HorizontalAlignment="Stretch">

                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="14"
                                        FontWeight="Medium"
                                        Foreground="{DynamicResource PrimaryForegroundSolidColorBrush}"
                                        Text="{Binding ServerModel.Name}"
                                        TextAlignment="Left"
                                        TextWrapping="WrapWithOverflow" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Grid
                            Grid.Row="2"
                            Margin="16,16,16,0"
                            VerticalAlignment="Center">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>


                        </Grid>
                    </Grid>
                </Grid>


                <Border
                    Grid.Row="3"
                    Height="32"
                    Margin="16,8,16,0"
                    BorderBrush="{DynamicResource ActivitySolidColorBrush}"
                    BorderThickness="1"
                    CornerRadius="5">
                    <Grid Margin="8,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Viewbox
                            Width="16"
                            Height="16"
                            Stretch="Fill">
                            <Path Data="M12.5446 2.19531H6.22628C3.48182 2.19531 1.8457 3.83143 1.8457 6.57589V12.8866C1.8457 15.6386 3.48182 17.2747 6.22628 17.2747H12.537C15.2815 17.2747 16.9176 15.6386 16.9176 12.8942V6.57589C16.9251 3.83143 15.289 2.19531 12.5446 2.19531ZM7.83224 10.6926C7.31954 11.4616 6.61081 12.0874 5.78144 12.5021C5.70604 12.5398 5.61556 12.5624 5.53263 12.5624C5.32151 12.5624 5.12548 12.4493 5.02746 12.2533C4.88421 11.9743 4.99731 11.635 5.28381 11.4918C5.93977 11.1676 6.49771 10.67 6.89731 10.0668C7.03303 9.86321 7.03303 9.60686 6.89731 9.40328C6.49017 8.80011 5.93223 8.30248 5.28381 7.97828C4.99731 7.84256 4.88421 7.50327 5.02746 7.21676C5.16318 6.9378 5.50247 6.8247 5.78144 6.96795C6.61081 7.38264 7.31954 8.00844 7.83224 8.77749C8.2243 9.35805 8.2243 10.112 7.83224 10.6926ZM13.1553 12.5624H10.1394C9.83026 12.5624 9.57391 12.3061 9.57391 11.9969C9.57391 11.6878 9.83026 11.4315 10.1394 11.4315H13.1553C13.4644 11.4315 13.7208 11.6878 13.7208 11.9969C13.7208 12.3061 13.4644 12.5624 13.1553 12.5624Z" Fill="{DynamicResource ActivitySolidColorBrush}" />
                        </Viewbox>

                        <TextBox
                            Grid.Column="1"
                            Margin="0,3"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="14"
                            Foreground="{DynamicResource SecondaryForegroundSolidColorBrush}"
                            Style="{StaticResource TextBlockMode}"
                            Text="{Binding ServerModel.Address, Mode=OneWay}" />

                        <controls:AdvancedButton
                            Grid.Column="2"
                            Height="24"
                            Margin="0,0,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding CopyIpAddressCommand}"
                            FontSize="14"
                            IconData="{DynamicResource PDCopy}"
                            Style="{StaticResource sm-icon-button}"
                            ToolTip="{DynamicResource Copy}" />
                    </Grid>
                </Border>

                <!--  Tabs  -->
                <ItemsControl
                    Grid.Row="4"
                    Margin="16,32,0,0"
                    AlternationCount="2"
                    ItemsSource="{Binding Items}"
                    KeyboardNavigation.IsTabStop="False" />

                <Border
                    Grid.Row="5"
                    Margin="0,0,0,8"
                    Background="Transparent">
                    <ItemsControl
                        Margin="0,4,0,0"
                        HorizontalAlignment="Center"
                        ItemsSource="{Binding ServerModel.SocialLinks.AllLinks, Mode=OneWay}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel IsItemsHost="True" Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>
